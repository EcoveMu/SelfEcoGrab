# SelfEcoGrab 自動爬蟲設定待辦事項

## 📋 專案狀態

**建立日期**: 2025-12-11  
**狀態**: 程式碼已完成，待推送至 GitHub 並設定 Secrets

---

## 🎯 專案目標

這是一個 GitHub Actions 自動化爬蟲專案，用於：
- 自動爬取政府標案資料（促參平台、招標公告、公開閱覽）
- 定時執行：每週 **一、三、五** 的 **08:45** 和 **16:45**（台北時間）
- 自動上傳結果到 Google Drive「爬蟲資料」資料夾
- 取代原本需要在本地電腦執行的 `RunAll.bat`

---

## ✅ 待辦事項清單

### 1️⃣ 推送程式碼到 GitHub
```bash
cd SelfEcoGrab
git add .
git commit -m "Initial commit: Automated scraper setup"
git push origin main
```
- [ ] 已完成推送

### 2️⃣ 設定 GitHub Secrets

1. 前往 GitHub repository 頁面
2. 點擊 **Settings** → **Secrets and variables** → **Actions**
3. 點擊 **New repository secret**
4. 填寫：
   - **Name**: `GOOGLE_SERVICE_ACCOUNT_KEY`
   - **Value**: 貼上 `Google設定資訊/ecove-crawler-8ed39882cee2.json` 的**完整內容**

- [ ] 已完成設定 Secrets

### 3️⃣ 手動測試 Workflow

1. 前往 GitHub repository 的 **Actions** 頁籤
2. 在左側選擇 **Data Collection** workflow
3. 點擊右側 **Run workflow** 下拉按鈕
4. 點擊綠色 **Run workflow** 按鈕
5. 等待執行完成（約 15-30 分鐘）

- [ ] 已完成手動測試

### 4️⃣ 驗證結果

1. 檢查 Google Drive「爬蟲資料」資料夾：
   - https://drive.google.com/drive/folders/1HenAIy7mPsfaVMHGd2sLu1fygfSpeFad
2. 確認有新的 JSON 檔案出現
3. 確認 ECOCrawer 系統可以讀取新資料

- [ ] 已驗證執行成功

---

## 📁 相關檔案位置

| 項目 | 路徑 |
|------|------|
| 本專案資料夾 | `SelfEcoGrab/` |
| Service Account 金鑰 | `Google設定資訊/ecove-crawler-8ed39882cee2.json` |
| GitHub Actions 配置 | `SelfEcoGrab/.github/workflows/scraper.yml` |
| 主程式 | `SelfEcoGrab/main.py` |

---

## 🤖 給 AI 的說明

當使用者回來繼續處理時，請協助：

1. **如果尚未推送**：指導完成 git push
2. **如果推送後 Secrets 未設定**：指導設定 `GOOGLE_SERVICE_ACCOUNT_KEY`
3. **如果需要測試**：指導手動觸發 workflow
4. **如果執行失敗**：檢查 GitHub Actions 日誌，協助排除問題
5. **如果需要調整排程**：修改 `.github/workflows/scraper.yml` 中的 cron 表達式

### 排程 Cron 格式參考
```yaml
# 目前設定：週一/三/五 08:45 和 16:45 (台北時間 UTC+8)
- cron: '45 0 * * 1,3,5'   # 08:45 台北 = 00:45 UTC
- cron: '45 8 * * 1,3,5'   # 16:45 台北 = 08:45 UTC
```

如需增加執行次數或調整時間，修改上述 cron 表達式即可。

---

## ❓ 常見問題

**Q: 原本的 working_tools 資料夾還需要嗎？**  
A: 可以保留，作為本地備份方案。SelfEcoGrab 是獨立的雲端版本。

**Q: 如果 GitHub Actions 失敗怎麼辦？**  
A: 檢查 Actions 標籤頁的執行日誌，通常是網站結構變動或網路問題。

**Q: 可以隨時手動觸發嗎？**  
A: 可以，在 Actions 頁籤點擊 "Run workflow" 即可。
